<!doctype html>
<html lang = "en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./style/reset.css">
        <link rel="stylesheet" href="./style/tokens.css">
        <link rel="stylesheet" href="./style/pages.css">
        <link rel="stylesheet" href="./style/index.css">
        <script type="module" src="./components/darkmode.js"></script>
        <script type="module">
            import { define, Auth } from "@calpoly/mustang";

            define({
                "mu-auth": Auth.Provider
            });

            document.addEventListener("DOMContentLoaded", () => {
                const btn = document.querySelector("#auth-btn");
                btn.addEventListener("click", () => {
                    window.location.href = "login.html";
                });
            });
        </script>
    </head>

    <body>
        <mu-auth provides="blazing:auth">
          <header>
            <a href = "index.html"><h1> VCT Rank</h1></a>
            
            <nav class="nav-bar">
                <a href="Profile.html">
                    <svg class="icon">
                        <use href="../assets/icons/sprites.svg#account"></use>       
                    </svg>
                    <span>Profile</span>
                </a>
     
                <a href="Rankings.html">
                    <svg class="icon">
                        <use href="../assets/icons/sprites.svg#rankings"></use>
                    </svg>
                    <span>Rankings</span>
                </a>

                <a href="HotTakes.html">
                    <svg class="icon">
                        <use href="../assets/icons/sprites.svg#forum"></use>
                    </svg>
                    <span>Forum</span>
                </a>

                <a href="Friends.html">
                    <svg class="icon">
                        <use href="../assets/icons/sprites.svg#friends"></use>
                    </svg>
                    <span>Friend List</span>
                </a>
            </nav>

            <div class="header-controls">
                <label>
                    <input type="checkbox" autocomplete="off" />
                    Light mode
                </label>
                <button id="auth-btn">Sign In</button>
            </div>
          </header>
        </mu-auth>

        <section class="card-grid">
            <div class="card">
                <img src="../assets/NRG.jpg" alt="Team NRG"/>
                <p>NRG takes down MIBR in a close 2-1 victory. Aspas pops off</p>
            </div>

            <div class="card">
                <img src="../assets/FNC.jpg" alt="Team FNC"/>
                <p>FNC comes back in last map to take the win against the heavy favorites PRX.</p>
            </div>
        </section>

        <script type="module">
            import { define, Auth, Events } from "@calpoly/mustang";

            define({ "mu-auth": Auth.Provider });

            const authBtn = document.getElementById("auth-btn");
            const authObserver = new Auth.Observer(document.querySelector("mu-auth"), "blazing:auth");

            authObserver.observe(auth => {
                if (auth.user && auth.user.authenticated) {
                // User is logged in
                    authBtn.textContent = "Sign Out";
                    authBtn.onclick = () => Events.relay(new Event("click"), "auth:message", ["auth/signout"]);
                } else {
                // User is not logged in
                    authBtn.textContent = "Sign In";
                    authBtn.onclick = () => window.location.href = "/login.html";
            }
            });
        </script>

    </body>
</html>