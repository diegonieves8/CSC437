import"./darkmode-CXfVOGe4.js";const d=document.getElementById("register-form"),e=document.getElementById("error-message"),r=document.getElementById("success-message");d.addEventListener("submit",async s=>{s.preventDefault(),e.textContent="",e.style.display="none",r.textContent="",r.style.display="none";const n=document.getElementById("username").value.trim(),t=document.getElementById("password").value,c=document.getElementById("confirm-password").value;if(t!==c){e.textContent="Passwords do not match",e.style.display="block";return}if(n.length<3||n.length>20){e.textContent="Username must be between 3 and 20 characters",e.style.display="block";return}if(t.length<6){e.textContent="Password must be at least 6 characters",e.style.display="block";return}try{const o=await fetch("/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:t})});if(o.ok){const a=await o.json();localStorage.setItem("token",a.token),r.textContent="Account created successfully! Redirecting...",r.style.display="block",setTimeout(()=>{window.location.href="./index.html"},1e3)}else{const a=await o.json();e.textContent=a.error||"Registration failed. Username may already exist.",e.style.display="block"}}catch(o){console.error("Registration error:",o),e.textContent="An error occurred. Please try again.",e.style.display="block"}});document.getElementById("confirm-password").addEventListener("input",s=>{const n=document.getElementById("password").value,t=s.target.value;t&&n!==t?s.target.setCustomValidity("Passwords do not match"):s.target.setCustomValidity("")});
